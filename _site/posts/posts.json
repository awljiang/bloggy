[
  {
    "path": "posts/2021-03-19-panel-data-analysis/",
    "title": "Determining the Drivers of Greenhouse Gas Emissions for European Countries using Panel Data Analysis",
    "description": "This post details the preliminary investigation on the drivers of greenhouse gas emissions in European countries through the use of panel data analysis. The assignment is part of the Shiny-based Visual Analytics Application project undertaken for the course of ISSS608 Visual Analytics and Applications offered by SMU MITB.",
    "author": [
      {
        "name": "Choong Shi Lian Selene",
        "url": "https://www.linkedin.com/in/selenechoong/"
      }
    ],
    "date": "2021-03-19",
    "categories": [],
    "contents": "\r\n\r\nContents\r\n1.0 Overview\r\n1.1 Background\r\n1.2 Core Purpose of Dataviz Exercise\r\n1.3 Components of Visualisation\r\n1.4 Storyboard for Proposed Design\r\n\r\n2.0 Interactivity\r\n3.0 Step-by-step Data Visualisation Preparation\r\n3.1 Installing and launching R packages\r\n3.2 Data Preparation\r\n3.2.1 The Data\r\n3.2.2 Importing dataset into R\r\n3.2.3 Reviewing the imported dataset\r\n\r\n3.3 Exploring Correlation betwen Variables in the Panel Data\r\n3.4 Panel Data Modelling\r\n3.5 Validation Tests\r\n\r\n\r\n1.0 Overview\r\n1.1 Background\r\nClimate change is affecting every parts of the world, causing dire consequences from more frequent extreme weather events to rising sea levels. In December 2020, the European Union (EU) leaders committed to an ambitious goal of reducing greenhouse gases by 55% by 2030 to tackle climate change. The European Union has been collating climate change-related data across various domains covering greenhouse gas (GHG) emission levels, drivers and mitigation of these emissions. Data has all be shared and published on Eurostat in tabular form under a consolidated section on climate change. The statistics allowed for better understanding, analysing and monitoring of climate change, which is essential for tracking EU’s progress towards achieving its 2030 goal.\r\n1.2 Core Purpose of Dataviz Exercise\r\nPanel data analysis is a statistical method to analyse longitudinal data that contains observations with multiple dimensions measured repeatedly over time. Many papers have been published by different authors on investigating the determinants of greenhouse gas emissions in the EU through panel data models. Some examples of these papers are listed below:\r\nGonzález-Sánchez, M., & Martín-Ortega, J. (2020). Greenhouse Gas Emissions Growth in Europe: A Comparative Analysis of Determinants. Sustainability (Basel, Switzerland), 12(3), 1012–. https://doi.org/10.3390/su12031012\r\nDogan, E., & Seker, F. (2016). An investigation on the determinants of carbon emissions for OECD countries: empirical evidence from panel models robust to heterogeneity and cross-sectional dependence. Environmental Science and Pollution Research International, 23(14), 14646–14655. https://doi.org/10.1007/s11356-016-6632-2\r\nAzevedo, I., Horta, I., & Leal, V. (2017). Analysis of the relationship between local climate change mitigation actions and greenhouse gas emissions – Empirical insights. Energy Policy, 111, 204–213. https://doi.org/10.1016/j.enpol.2017.09.032\r\nTabular forms were often adopted when presenting the findings from the panel models as well as the results of the various validation tests performed for the panel models. This exercise aims to visualise the results of the panel models and the validation tests, to allow readers to easily interpret the results and identify the determinants of greenhouse gas emissions for each EU country from the visualisations.\r\n1.3 Components of Visualisation\r\n\r\n1.4 Storyboard for Proposed Design\r\n\r\n\r\n\r\n2.0 Interactivity\r\n3.0 Step-by-step Data Visualisation Preparation\r\n3.1 Installing and launching R packages\r\nIn this exercise, a list of panel data modelling and visualisation packages will be installed and launched. Besides these packages, tidyverse will also be installed and launched for data wrangling and preparation. The code chunk below installs the required packages and loads them into the RStudio Environment.\r\n\r\npackages <- c(\"tidyverse\", \"plm\", \"ggstatsplot\", \"ggplot2\", \"RColorBrewer\", \"colorspace\")\r\n\r\nfor (p in packages){\r\n  if (!require(p,character.only=T)){\r\n    install.packages(p)\r\n  }\r\n  library(p, character.only=T)\r\n}\r\n\r\n3.2 Data Preparation\r\n3.2.1 The Data\r\nDatasets used in this exercise is obtained from Eurostat (https://ec.europa.eu/eurostat), the database with European statistics maintained by the statistical office of the European Union. The following datasets have been used - Greenhouse gas emissions, Gross Domestic Product (GDP), Final energy intensity, Fuel mix, Carbon intensity, Share of energy from renewable sources, Environmental taxes by economic activity, Liquid biofuels production capacities, Solar thermal collectors’ surface and Heat pumps - technical characteristics by technologies.\r\nIndividual datasets have been wrangled and merged into one consolidated csv dataset. More details on the data preparation process can be found on the Data Preparation post. The final consolidated dataset that was used in this exercise can be found on our group’s github.\r\n3.2.2 Importing dataset into R\r\nData will be imported into RStudio environment by using read_csv() of readr, and data will be imported as a tibble dataframe.\r\n\r\nGHG_EU <- read_csv(\"data/GHGproj_data.csv\")\r\n\r\n3.2.3 Reviewing the imported dataset\r\nNext, we will examine the structure of the dataframe using glimpse() of dplyr.\r\n\r\nglimpse(GHG_EU)\r\nRows: 324\r\nColumns: 15\r\n$ Country          <chr> \"European Union - 27 countries (from 2020)\"~\r\n$ Year             <dbl> 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2~\r\n$ GHG_emissions    <dbl> 4188244, 4075283, 3996645, 3912623, 3776464~\r\n$ CO2_emissions    <dbl> 3443914, 3338307, 3262594, 3181485, 3046141~\r\n$ CH4_emissions    <dbl> 427117.5, 419634.2, 416826.8, 411161.3, 406~\r\n$ NO2_emissions    <dbl> 219323.1, 216186.6, 213789.2, 214272.4, 216~\r\n$ GDP              <dbl> 10977298, 11321811, 11388518, 11517119, 117~\r\n$ Final_EI         <dbl> 92.24, 85.89, 84.28, 83.56, 77.43, 75.05, 7~\r\n$ Fuel_mix         <dbl> 2.80, 2.88, 2.78, 2.67, 2.62, 2.57, 2.54, 2~\r\n$ Carbon_intensity <dbl> 91.9, 91.5, 90.9, 89.5, 88.3, 88.7, 88.0, 8~\r\n$ Renewables_share <dbl> 14.421, 14.551, 16.023, 16.697, 17.463, 17.~\r\n$ Envt_taxes       <dbl> 259023.0, 271901.0, 278204.4, 284120.8, 291~\r\n$ Liquid_biofuels  <dbl> 29688.79, 28710.54, 28421.94, 29751.46, 291~\r\n$ Solar_thermal    <dbl> 34487.96, 37949.15, 40587.31, 43245.73, 454~\r\n$ Heat_pumps       <dbl> 31200.12, 43941.43, 48603.18, 53297.87, 799~\r\n\r\nReviewing the dataframe showed that it contains all the listed datasets above as individual columns with data spanning from Year 2010 to 2018. Apart from overall greenhouse gas emissions (GHG_emission), there was also data on individual gases such as carbon dioxide (CO2_emission), methane (CH4_emission) and nitrogen dioxide (NO2_emission). Further inspection also showed that:\r\nThe dataframe contains data at both the regional and country levels. The regional levels (i.e. “European Union - 27 countries (from 2020)”, “European Union - 28 countries (2013-2020) and Iceland under the Kyoto Protocol” and “European Union - 28 countries (2013-2020)”) will not be used in this analysis. Hence, filter() of dplyr will be used to keep only the relevant country data.\r\nGermany was labelled with a long name of “Germany (until 1990 former territory of the FRG)” which will be recoded using a combination of mutate() and recode() of dplyr.\r\n\r\nGHG_EU_cleaned <- GHG_EU %>% \r\n  filter(!Country %in% c(\"European Union - 27 countries (from 2020)\", \r\n                         \"European Union - 28 countries (2013-2020) and Iceland under the Kyoto Protocol\", \r\n                         \"European Union - 28 countries (2013-2020)\")) %>% \r\n  mutate(Country = recode(Country, \"Germany (until 1990 former territory of the FRG)\" = \"Germany\"))\r\n\r\nglimpse(GHG_EU_cleaned)\r\nRows: 297\r\nColumns: 15\r\n$ Country          <chr> \"Belgium\", \"Belgium\", \"Belgium\", \"Belgium\",~\r\n$ Year             <dbl> 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2~\r\n$ GHG_emissions    <dbl> 134315.86, 123782.51, 120922.50, 120949.31,~\r\n$ CO2_emissions    <dbl> 114561.03, 105046.06, 102428.75, 102674.40,~\r\n$ CH4_emissions    <dbl> 8794.36, 8530.82, 8392.13, 8236.66, 8118.96~\r\n$ NO2_emissions    <dbl> 7587.12, 6374.29, 6306.82, 6146.26, 6181.75~\r\n$ GDP              <dbl> 363140.1, 375967.8, 386174.7, 392880.0, 403~\r\n$ Final_EI         <dbl> 114.09, 103.22, 99.68, 102.20, 92.09, 91.67~\r\n$ Fuel_mix         <dbl> 1.39, 1.41, 1.37, 1.57, 1.65, 1.64, 1.54, 1~\r\n$ Carbon_intensity <dbl> 90.6, 87.7, 90.7, 86.9, 85.8, 90.1, 83.6, 8~\r\n$ Renewables_share <dbl> 6.002, 6.275, 7.089, 7.650, 8.043, 8.026, 8~\r\n$ Envt_taxes       <dbl> 8879.00, 9668.40, 9735.00, 9905.50, 10254.5~\r\n$ Liquid_biofuels  <dbl> 1374.000, 1374.000, 1105.800, 1105.145, 110~\r\n$ Solar_thermal    <dbl> 371.000, 420.000, 527.000, 570.000, 614.600~\r\n$ Heat_pumps       <dbl> 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0~\r\n\r\n3.3 Exploring Correlation betwen Variables in the Panel Data\r\nPrior to running the panel data regression, relationship between the variables in the dataframe was first investigated using ggcorrmat of “ggstats” to identify multicollinearity issues among the regressors.\r\n\r\nggcorrmat(data = GHG_EU_cleaned, \r\n          cor.vars = c(GHG_emissions:Heat_pumps), \r\n          cor.vars.names = c(\"GHG emissions\", \"CO2 emissions\", \"CH4 emissions\", \"NO2 emissions\", \"GDP\", \r\n                             \"final energy intensity\", \"fuel mix\", \"carbon intensity\", \"renewable energy share\", \r\n                             \"environmental taxes\", \"liquid biofuels\", \"solar thermal\", \"heat pumps\"), \r\n          title = \"Relationship between GHG and drivers/ mitigation variables\", \r\n          colors = divergingx_hcl(3, palette = \"TealRose\", rev = TRUE)) +\r\n  theme(axis.text.y = element_text(size = 10), \r\n        axis.text.x = element_text(angle = 90, hjust = 1, size = 10))\r\n\r\n\r\nCorrelation matrix plot showed that GDP and Environmental Taxes were highly correlated with each other. As GDP has a higher correlation with the dependent variables, this variable will be included instead of Environmental Taxes. The final set of variables that\r\n3.4 Panel Data Modelling\r\nThe plm package will be used for building the panel data models. Multiple arguments will be changed when using the plm() function of the package to allow us to estimate different basic panel models and introduce individual and/or time effects. For the random effects model, the estimator of the parameter can also be varied. The various values for each argument are listed below.\r\nArgument\r\nValue\r\nmodel\r\n- the fixed effects model (“within”)  - the error components model (“random”)  - the pooling model (“pooling”)  - the between model (“between”)  - the first-difference model (“fd”)\r\neffect\r\n- time effects (“time”)  - individual effects (“individual”)  - individual and time effects (“twoways”)\r\nrandom.method\r\n- from Swamy and Arora (“swar”)  - from Wallace and Hussain (“walhus”)  - from Amemiya (“amemiya”)  - Nerlove (“nerlove”)\r\nEach of the pane below contain the code chunks to run each model for the various effect (and random.method for random effects model) as well as the code chunks to visualise the results of the models.\r\n\r\n\r\n\r\n\r\nFixed Effects\r\nRandom Effects\r\nPooling\r\nBetween\r\nFirst-difference\r\n\r\n3.5 Validation Tests\r\n\r\n\r\n",
    "preview": "posts/2021-03-19-panel-data-analysis/images/sketch.jpg",
    "last_modified": "2021-04-03T15:23:29+08:00",
    "input_file": "panel-data-analysis.utf8.md"
  },
  {
    "path": "posts/2021-03-19-ordinary-least-square-model/",
    "title": "Estimating the relationship of determinants and Greenhouse Gas Emission levels using Ordinary Least Square Regression",
    "description": "The write-up below details the steps taken to explore the different packages available to perform Ordinary Least Square regression model to estimate the relationship of determinants and Greenhouse gas emission levels. This is part of the project deliverables for a project undertaken for the course ISSS608- Visual Analytics offered in SMU MITB.",
    "author": [
      {
        "name": "Jiang Weiling Angeline",
        "url": "www.linkedin.com/in/angeline-jiang"
      }
    ],
    "date": "2021-03-18",
    "categories": [],
    "contents": "\r\n\r\nContents\r\n1.0 Purpose of DataViz Exercise\r\n2.0 Step-by-Step Data Preparation for OLS\r\n2.1 Installing and Launching R packages\r\n2.2 Data Source\r\n2.3 Loading the dataset onto R\r\n2.4 Creating the dataframe for OLS\r\n\r\n3.0 Data Visualisation modules\r\n3.1 Variable Selection\r\n3.2 Selected Models\r\n3.2.1 Regression Summary\r\n3.2.2 Testing for Heteroskedasticity\r\n3.2.3 Residual Diagnostics\r\n3.2.4 Collinear Diagnostics\r\n3.2.5 Model Fit Assessment\r\n\r\n\r\n4.0 Proposed Visualization\r\n\r\n\r\nh1, h2, h3 {\r\ntext-align: left\r\n}\r\nbody {\r\ntext-align: justify}\r\n1.0 Purpose of DataViz Exercise\r\nOrdinary least squares (OLS) regression is a statistical method to estimate the relationship between one or more independent variables and a dependent variable by minimizing the sum of the squares in the difference between the observed and predicted values of the dependent variable based on the best fit straight line. There are a wide range of published papers which explored using OLS to estimate the relationship between various factors and greenhouse gas emissions. Some examples of these papers are listed below:\r\nBudiono, R., Juahir, H., Mamat, M., Supian, S., & Nurzaman, M. (2019, October). Modeling and analysis of CO2 emissions in million tons of sectoral greenhouse gases in Indonesia. In IOP Conference Series: Materials Science and Engineering (Vol. 621, No. 1, p. 012020). IOP Publishing.\r\nGrunewald, N., & Martínez-Zarzoso, I. (2009). Driving factors of carbon dioxide emissions and the impact from Kyoto Protocol.\r\nHang, G., & Yuan-Sheng, J. (2011). The relationship between CO2 emissions, economic scale, technology, income and population in China. Procedia Environmental Sciences, 11, 1183-1188.\r\nNonetheless, research papers usually only published the final model used in their analysis (often without the exact code) and omitted the intermediate steps used to derive the final set of predictors. Tests conducted to ensure that OLS assumptions were not violated were also seldom presented in the papers. Hence, this exercise aims to explore different R packages which are able to run different permutations of OLS models, the necessary list of OLS assumption tests and present results in the form of a visualization.\r\n2.0 Step-by-Step Data Preparation for OLS\r\n2.1 Installing and Launching R packages\r\nA list of packages are required for this makeover exercise. This code chunk installs the required packages and loads them onto RStudio environment.\r\n\r\n\r\npackages = c('tidyverse', 'olsrr', 'lmtest', 'dplyr', 'ggplot2', 'ggstatsplot', 'ggcorrplot', \r\n             'purrr', 'jtools', 'broom.mixed', 'ggstance', 'EnvStats', 'graphics','caret','ppcor')\r\nfor (p in packages){\r\n  if(!require(p, character.only = T)){\r\n    install.packages(p)\r\n  }\r\n  library(p, character.only = T)\r\n}\r\n\r\n\r\n\r\n2.2 Data Source\r\nAll the datasets used for this project is obtained from Eurostat, the database with European statistics maintained by the statistical office of the European Union. Our group will be focusing on the overall greenhouse gas emissions, excluding Land Use and Land Use Change and Forest (LULUCF) while also exploring into the common greenhouse gases (i.e. carbon dioxide, methane and nitrous oxide).\r\nAs multiple data was pulled from Eurostat database, please refer to Data Preparation page for the glossary list and steps taken to merge and obtain a single dataset for analysis.\r\n2.3 Loading the dataset onto R\r\nThe output shows that all except ‘Country’ is numeric variable, which is correct. Hence there’s no need to change the type of any variable.\r\n\r\n\r\n# Reading the csv file as a tbl_df\r\nghg_2010_2018 <- read_csv(\"data/GHGproj_data.csv\")\r\n\r\n# Inspecting the structure of the dataset\r\nstr(ghg_2010_2018)\r\n\r\n\r\nspec_tbl_df [324 x 15] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\r\n $ Country         : chr [1:324] \"European Union - 27 countries (from 2020)\" \"European Union - 27 countries (from 2020)\" \"European Union - 27 countries (from 2020)\" \"European Union - 27 countries (from 2020)\" ...\r\n $ Year            : num [1:324] 2010 2011 2012 2013 2014 ...\r\n $ GHG_emissions   : num [1:324] 4188244 4075283 3996645 3912623 3776464 ...\r\n $ CO2_emissions   : num [1:324] 3443914 3338307 3262594 3181485 3046141 ...\r\n $ CH4_emissions   : num [1:324] 427118 419634 416827 411161 406015 ...\r\n $ NO2_emissions   : num [1:324] 219323 216187 213789 214272 216858 ...\r\n $ GDP             : num [1:324] 10977298 11321811 11388518 11517119 11781640 ...\r\n $ Final_EI        : num [1:324] 92.2 85.9 84.3 83.6 77.4 ...\r\n $ Fuel_mix        : num [1:324] 2.8 2.88 2.78 2.67 2.62 2.57 2.54 2.53 2.4 NA ...\r\n $ Carbon_intensity: num [1:324] 91.9 91.5 90.9 89.5 88.3 88.7 88 86.7 85.2 NA ...\r\n $ Renewables_share: num [1:324] 14.4 14.6 16 16.7 17.5 ...\r\n $ Envt_taxes      : num [1:324] 259023 271901 278204 284121 291030 ...\r\n $ Liquid_biofuels : num [1:324] 29689 28711 28422 29751 29152 ...\r\n $ Solar_thermal   : num [1:324] 34488 37949 40587 43246 45425 ...\r\n $ Heat_pumps      : num [1:324] 31200 43941 48603 53298 79990 ...\r\n - attr(*, \"spec\")=\r\n  .. cols(\r\n  ..   Country = col_character(),\r\n  ..   Year = col_double(),\r\n  ..   GHG_emissions = col_double(),\r\n  ..   CO2_emissions = col_double(),\r\n  ..   CH4_emissions = col_double(),\r\n  ..   NO2_emissions = col_double(),\r\n  ..   GDP = col_double(),\r\n  ..   Final_EI = col_double(),\r\n  ..   Fuel_mix = col_double(),\r\n  ..   Carbon_intensity = col_double(),\r\n  ..   Renewables_share = col_double(),\r\n  ..   Envt_taxes = col_double(),\r\n  ..   Liquid_biofuels = col_double(),\r\n  ..   Solar_thermal = col_double(),\r\n  ..   Heat_pumps = col_double()\r\n  .. )\r\n\r\n2.4 Creating the dataframe for OLS\r\nFor the purpose of exploring OLS regression model in this assignment, the building of the OLS model will focus only on 2018 data. Other years of regression model can be run subsequently by filtering the dataset to the specific year itself.\r\nWhen importing the dataset earlier, there were records such as “European Union - 27 countries (from 2020)”, “European Union - 27 countries (from 2020)” etc, which presents the combination of multiple countries. As such, these records are excluded using the dplyr() package to prevent serious correlation with other records (countries). To have a consistent naming of countries, “Germany (until 1990 former territory of the FRG)” was replaced with “Germany” using the tidyverse() package.\r\nIn addition, instead of having “Country” reflected as a column variable, additional code was ran to reflect the countries as “Row name”. Given that the focus of this dataset is on 2018, the “Year” variable can be dropped as it’s redundant.\r\n\r\n\r\nghg_2018 <-  ghg_2010_2018 %>% \r\n  filter(Year == 2018) %>% # Subset the dataset to get 2018 records\r\n  filter(!grepl('European Union', Country)) %>% # Exclude records containing 'European Union' \r\n  replace(., (.)=='Germany (until 1990 former territory of the FRG)', \"Germany\") %>% #Replace country name for Germany \r\n  remove_rownames %>% column_to_rownames(var=\"Country\") # Change column \"Country\" to \"Row name\"\r\n\r\nghg_2018 <- subset(ghg_2018, select=-c(Year)) # Drop the \"Year\" variable since it's redundant\r\n\r\n\r\n\r\nReviewing the Variables\r\n(A) Density plot\r\nThe density plots plotted using ggplot2() package showed that the values/scales of “CH4_emissions”, “CO2_emissions”, “Envt_taxes”, “GDP”, “GHG_emissions”, “Heat_pumps”, “Liquid_biofuels”, “NO2_emissions” and “Solar_thermal” are very large compared to “Carbon_intensity”, Final_EI“,”Fuel_mix\" and “Renewables_share”. Hence, transformation may be applied on the former group of variables for better interpretability of the coefficient in the output.\r\nTo get histogram plot, change “geom_density()” to “geom_histogram()” in the code chunk.\r\n\r\n\r\nghg_2018 %>%\r\n  keep(is.numeric) %>% # Keep only numeric columns\r\n  gather() %>% # Convert to key-value pairs\r\n  ggplot(aes(value)) + # Plot the values\r\n    facet_wrap(~ key, scales = \"free\") + # In separate panels\r\n    geom_density()   # as density\r\n\r\n\r\n\r\n\r\nAn example of transformation is by taking “log (base e)” on the variables as shown below, so that the scales of the variables are similar.\r\n\r\n\r\nghg_2018 %>%\r\n  keep(is.numeric) %>% \r\n  gather() %>% \r\n  ggplot(aes(log(value))) + # transformation\r\n    facet_wrap(~ key, scales = \"free\") + \r\n    geom_density()   \r\n\r\n\r\n\r\n\r\n(B) Correlation plot\r\nUsing the ggcorrplot() package, we can plot a correlalogram (with correlation coefficient). If there are NAs present in the selected variables, the legend will display minimum, median, and maximum number of pairs used for correlation tests.\r\nThe chart below showed that some predictors are highly correlated with each other (either dark grey or dark red) and hence we will probably expect some predictors to be omitted in the OLS regression output. For example, Envt_taxes and GDP are highly correlated (0.96) and if these two predictors were to be included in the same model, either will be omitted.\r\n\r\n\r\n# as a default this function outputs a correlation matrix plot\r\nggstatsplot::ggcorrmat(\r\n  data = ghg_2018,\r\n  colors = c(\"#B2182B\", \"white\", \"#4D4D4D\"),\r\n  title = \"Correlalogram for Greenhouse gas emission 2018 dataset\"\r\n)\r\n\r\n\r\n\r\n\r\nFinal dataset for OLS model\r\nFor ease of coding, create a dataframe containing only the transformed variables. In addition, we will focus on using “GHG_emissions” as the dependent variable. To explore other source of emission, one can amend the code accordingly.\r\n\r\n\r\nghg_2018_ols <- log(ghg_2018 + 1) # transform all variables\r\n\r\n# Drop all dependent variables except \"GHG_emissions\"\r\nghg_2018_ols <- subset(ghg_2018_ols, select = -c(CO2_emissions, CH4_emissions, NO2_emissions)) \r\n\r\n\r\n\r\n3.0 Data Visualisation modules\r\nIn this section, 2 main modules will be covered, namely (1) Variable Selection and (2) Selected Model.\r\nFor illustration of the different modules, we randomly selected 3 independent variables, namely “GDP”, “Final_EI” and “Fuel_mix” to be considered. In the proposed shiny app, there will be a multi-select option for users to decide the independent variables they wish to consider.\r\nIn addition, the olsrr() package will be primarily used as it provides the following tools for building OLS regression models using R.\r\nComprehensive Regression Output\r\nVariable Selection Procedures\r\nHeteroskedasticity Tests\r\nCollinearity Diagnostics\r\nModel Fit Assessment\r\nResidual Diagnostics\r\nNonetheless, other R packages will also be explored to determine the most appropriate data visualization.\r\n3.1 Variable Selection\r\nIn this section, 6 main methods will be explored to identify the best subset of predictors to include in the model, among all possible subsets of predictors.\r\n(i) All possibilities\r\nAll subset regression tests all possible subsets of the set of potential independent variables. If there are k potential independent variables (besides the constant), then there are 2^k distinct subsets of them to be tested. Hence, for this dataset, if all the 9 potential independent variables are include into the model, there will be 2^9 = 512 models generated.\r\nBase on the plots, model 4 has the highest adjusted R-sqaure and lowest AIC, hence is the better model compared to other models.\r\n\r\n\r\nmodel <- lm(GHG_emissions ~ GDP + Final_EI + Fuel_mix, data = ghg_2018_ols)\r\n\r\n# Detailed output\r\nk <- ols_step_all_possible(model)\r\nk\r\n\r\n\r\n  Index N            Predictors  R-Square Adj. R-Square Mallow's Cp\r\n1     1 1                   GDP 0.8251792    0.81953986   57.874319\r\n3     2 1              Fuel_mix 0.1594361    0.13045118  248.904042\r\n2     3 1              Final_EI 0.1123569    0.08174848  264.357194\r\n5     4 2          GDP Fuel_mix 0.9171542    0.91123668    2.193035\r\n4     5 2          GDP Final_EI 0.8578250    0.84766963   21.667079\r\n6     6 2     Final_EI Fuel_mix 0.2398643    0.18556886  224.504564\r\n7     7 3 GDP Final_EI Fuel_mix 0.9177423    0.90860259    4.000000\r\n\r\n# Panel of fit criteria\r\nplot(k, main = \"Panel of fit criteria\", xlab=\"No. of predictors\", ylab=\"Value\")\r\n\r\n\r\n\r\n\r\n(ii) Best Subset\r\nThe code chunk below selects the subset of predictors that do the best at meeting some well-defined objective criterion e.g. largest adjusted R-square or smallest AIC etc. From the plot, users will be able to identify the model with the highest adjusted R-square value etc.\r\n\r\n\r\nmodel <- lm(GHG_emissions ~ GDP + Final_EI + Fuel_mix , data = ghg_2018_ols)\r\n\r\n# Detailed output\r\nk <- ols_step_best_subset(model)\r\nk\r\n\r\n\r\n      Best Subsets Regression       \r\n------------------------------------\r\nModel Index    Predictors\r\n------------------------------------\r\n     1         GDP                   \r\n     2         GDP Fuel_mix          \r\n     3         GDP Final_EI Fuel_mix \r\n------------------------------------\r\n\r\n                                                  Subsets Regression Summary                                                   \r\n-------------------------------------------------------------------------------------------------------------------------------\r\n                       Adj.        Pred                                                                                         \r\nModel    R-Square    R-Square    R-Square     C(p)        AIC        SBIC        SBC       MSEP       FPE       HSP       APC  \r\n-------------------------------------------------------------------------------------------------------------------------------\r\n  1        0.8252      0.8195      0.7877    57.8743    78.1392    -18.7605    82.6287    18.3075    0.5883    0.0185    0.1974 \r\n  2        0.9172      0.9112      0.9032     2.1930    41.6987    -45.4747    47.4346     5.9678    0.2108    0.0071    0.1006 \r\n  3        0.9177      0.9086      0.8923     4.0000    43.4778    -43.3551    50.6478     6.1533    0.2235    0.0076    0.1066 \r\n-------------------------------------------------------------------------------------------------------------------------------\r\nAIC: Akaike Information Criteria \r\n SBIC: Sawa's Bayesian Information Criteria \r\n SBC: Schwarz Bayesian Criteria \r\n MSEP: Estimated error of prediction, assuming multivariate normality \r\n FPE: Final Prediction Error \r\n HSP: Hocking's Sp \r\n APC: Amemiya Prediction Criteria \r\n\r\n# Panel of fit criteria\r\nplot(k, main = \"Panel of fit criteria\", xlab=\"No. of predictors\", ylab=\"Value\")\r\n\r\n\r\n\r\n\r\n(iii) Stepwise Forward\r\nIn a step-wise method, we can start with a single predictor and continue to add predictors based on p-value until no variable is left. The output plot shows the changes in the criterion value upon adding a predictor which is useful for the users to understand the importance of the predictor added into the model.\r\n\r\n\r\nmodel <- lm(GHG_emissions ~ GDP + Final_EI + Fuel_mix , data = ghg_2018_ols)\r\n\r\n# Selection summary\r\nk <- ols_step_forward_p(model)\r\nk\r\n\r\n\r\n\r\n                           Selection Summary                             \r\n------------------------------------------------------------------------\r\n        Variable                  Adj.                                      \r\nStep    Entered     R-Square    R-Square     C(p)        AIC       RMSE     \r\n------------------------------------------------------------------------\r\n   1    GDP           0.8252      0.8195    57.8743    78.1392    0.7448    \r\n   2    Fuel_mix      0.9172      0.9112     2.1930    41.6987    0.4384    \r\n------------------------------------------------------------------------\r\n\r\n# Plot\r\nplot(k)\r\n\r\n\r\n\r\n# obtain detailed output\r\nols_step_forward_p(model, details = TRUE)\r\n\r\n\r\nForward Selection Method    \r\n---------------------------\r\n\r\nCandidate Terms: \r\n\r\n1. GDP \r\n2. Final_EI \r\n3. Fuel_mix \r\n\r\nWe are selecting variables based on p value...\r\n\r\n\r\nForward Selection: Step 1 \r\n\r\n- GDP \r\n\r\n                        Model Summary                         \r\n-------------------------------------------------------------\r\nR                       0.908       RMSE               0.745 \r\nR-Squared               0.825       Coef. Var          6.842 \r\nAdj. R-Squared          0.820       MSE                0.555 \r\nPred R-Squared          0.788       MAE                0.561 \r\n-------------------------------------------------------------\r\n RMSE: Root Mean Square Error \r\n MSE: Mean Square Error \r\n MAE: Mean Absolute Error \r\n\r\n                               ANOVA                                 \r\n--------------------------------------------------------------------\r\n               Sum of                                               \r\n              Squares        DF    Mean Square       F         Sig. \r\n--------------------------------------------------------------------\r\nRegression     81.167         1         81.167    146.324    0.0000 \r\nResidual       17.196        31          0.555                      \r\nTotal          98.363        32                                     \r\n--------------------------------------------------------------------\r\n\r\n                                  Parameter Estimates                                   \r\n---------------------------------------------------------------------------------------\r\n      model      Beta    Std. Error    Std. Beta      t        Sig      lower    upper \r\n---------------------------------------------------------------------------------------\r\n(Intercept)    -1.041         0.994                 -1.047    0.303    -3.069    0.987 \r\n        GDP     0.983         0.081        0.908    12.096    0.000     0.817    1.148 \r\n---------------------------------------------------------------------------------------\r\n\r\n\r\n\r\nForward Selection: Step 2 \r\n\r\n- Fuel_mix \r\n\r\n                        Model Summary                         \r\n-------------------------------------------------------------\r\nR                       0.958       RMSE               0.438 \r\nR-Squared               0.917       Coef. Var          3.959 \r\nAdj. R-Squared          0.911       MSE                0.192 \r\nPred R-Squared          0.903       MAE                0.330 \r\n-------------------------------------------------------------\r\n RMSE: Root Mean Square Error \r\n MSE: Mean Square Error \r\n MAE: Mean Absolute Error \r\n\r\n                               ANOVA                                 \r\n--------------------------------------------------------------------\r\n               Sum of                                               \r\n              Squares        DF    Mean Square       F         Sig. \r\n--------------------------------------------------------------------\r\nRegression     59.588         2         29.794    154.989    0.0000 \r\nResidual        5.383        28          0.192                      \r\nTotal          64.971        30                                     \r\n--------------------------------------------------------------------\r\n\r\n                                 Parameter Estimates                                   \r\n--------------------------------------------------------------------------------------\r\n      model     Beta    Std. Error    Std. Beta      t        Sig      lower    upper \r\n--------------------------------------------------------------------------------------\r\n(Intercept)    0.191         0.643                  0.298    0.768    -1.125    1.508 \r\n        GDP    0.849         0.053        0.884    16.003    0.000     0.740    0.958 \r\n   Fuel_mix    0.557         0.124        0.247     4.479    0.000     0.302    0.811 \r\n--------------------------------------------------------------------------------------\r\n\r\n\r\n\r\nNo more variables to be added.\r\n\r\nVariables Entered: \r\n\r\n+ GDP \r\n+ Fuel_mix \r\n\r\n\r\nFinal Model Output \r\n------------------\r\n\r\n                        Model Summary                         \r\n-------------------------------------------------------------\r\nR                       0.958       RMSE               0.438 \r\nR-Squared               0.917       Coef. Var          3.959 \r\nAdj. R-Squared          0.911       MSE                0.192 \r\nPred R-Squared          0.903       MAE                0.330 \r\n-------------------------------------------------------------\r\n RMSE: Root Mean Square Error \r\n MSE: Mean Square Error \r\n MAE: Mean Absolute Error \r\n\r\n                               ANOVA                                 \r\n--------------------------------------------------------------------\r\n               Sum of                                               \r\n              Squares        DF    Mean Square       F         Sig. \r\n--------------------------------------------------------------------\r\nRegression     59.588         2         29.794    154.989    0.0000 \r\nResidual        5.383        28          0.192                      \r\nTotal          64.971        30                                     \r\n--------------------------------------------------------------------\r\n\r\n                                 Parameter Estimates                                   \r\n--------------------------------------------------------------------------------------\r\n      model     Beta    Std. Error    Std. Beta      t        Sig      lower    upper \r\n--------------------------------------------------------------------------------------\r\n(Intercept)    0.191         0.643                  0.298    0.768    -1.125    1.508 \r\n        GDP    0.849         0.053        0.884    16.003    0.000     0.740    0.958 \r\n   Fuel_mix    0.557         0.124        0.247     4.479    0.000     0.302    0.811 \r\n--------------------------------------------------------------------------------------\r\n\r\n                           Selection Summary                             \r\n------------------------------------------------------------------------\r\n        Variable                  Adj.                                      \r\nStep    Entered     R-Square    R-Square     C(p)        AIC       RMSE     \r\n------------------------------------------------------------------------\r\n   1    GDP           0.8252      0.8195    57.8743    78.1392    0.7448    \r\n   2    Fuel_mix      0.9172      0.9112     2.1930    41.6987    0.4384    \r\n------------------------------------------------------------------------\r\n\r\n(iv) Stepwise Backward\r\nSimilarly, we can start with the full list of predictors and remove predictors based on p-value until only one variable is left.\r\n\r\n\r\nmodel <- lm(GHG_emissions ~ GDP + Final_EI + Fuel_mix , data = ghg_2018_ols)\r\n\r\n# Selection summary\r\nk <- ols_step_backward_p(model)\r\nk\r\n\r\n\r\n\r\n                          Elimination Summary                           \r\n-----------------------------------------------------------------------\r\n        Variable                  Adj.                                     \r\nStep    Removed     R-Square    R-Square     C(p)       AIC       RMSE     \r\n-----------------------------------------------------------------------\r\n   1    Final_EI      0.9172      0.9112    2.1930    41.6987    0.4384    \r\n-----------------------------------------------------------------------\r\n\r\n# Plot\r\nplot(k)\r\n\r\n\r\n\r\n# obtain detailed output\r\nols_step_backward_p(model, details = TRUE)\r\n\r\n\r\nBackward Elimination Method \r\n---------------------------\r\n\r\nCandidate Terms: \r\n\r\n1 . GDP \r\n2 . Final_EI \r\n3 . Fuel_mix \r\n\r\nWe are eliminating variables based on p value...\r\n\r\n- Final_EI \r\n\r\nBackward Elimination: Step 1 \r\n\r\n Variable Final_EI Removed \r\n\r\n                        Model Summary                         \r\n-------------------------------------------------------------\r\nR                       0.958       RMSE               0.438 \r\nR-Squared               0.917       Coef. Var          3.959 \r\nAdj. R-Squared          0.911       MSE                0.192 \r\nPred R-Squared          0.903       MAE                0.330 \r\n-------------------------------------------------------------\r\n RMSE: Root Mean Square Error \r\n MSE: Mean Square Error \r\n MAE: Mean Absolute Error \r\n\r\n                               ANOVA                                 \r\n--------------------------------------------------------------------\r\n               Sum of                                               \r\n              Squares        DF    Mean Square       F         Sig. \r\n--------------------------------------------------------------------\r\nRegression     59.588         2         29.794    154.989    0.0000 \r\nResidual        5.383        28          0.192                      \r\nTotal          64.971        30                                     \r\n--------------------------------------------------------------------\r\n\r\n                                 Parameter Estimates                                   \r\n--------------------------------------------------------------------------------------\r\n      model     Beta    Std. Error    Std. Beta      t        Sig      lower    upper \r\n--------------------------------------------------------------------------------------\r\n(Intercept)    0.191         0.643                  0.298    0.768    -1.125    1.508 \r\n        GDP    0.849         0.053        0.884    16.003    0.000     0.740    0.958 \r\n   Fuel_mix    0.557         0.124        0.247     4.479    0.000     0.302    0.811 \r\n--------------------------------------------------------------------------------------\r\n\r\n\r\n\r\nNo more variables satisfy the condition of p value = 0.3\r\n\r\n\r\nVariables Removed: \r\n\r\n- Final_EI \r\n\r\n\r\nFinal Model Output \r\n------------------\r\n\r\n                        Model Summary                         \r\n-------------------------------------------------------------\r\nR                       0.958       RMSE               0.438 \r\nR-Squared               0.917       Coef. Var          3.959 \r\nAdj. R-Squared          0.911       MSE                0.192 \r\nPred R-Squared          0.903       MAE                0.330 \r\n-------------------------------------------------------------\r\n RMSE: Root Mean Square Error \r\n MSE: Mean Square Error \r\n MAE: Mean Absolute Error \r\n\r\n                               ANOVA                                 \r\n--------------------------------------------------------------------\r\n               Sum of                                               \r\n              Squares        DF    Mean Square       F         Sig. \r\n--------------------------------------------------------------------\r\nRegression     59.588         2         29.794    154.989    0.0000 \r\nResidual        5.383        28          0.192                      \r\nTotal          64.971        30                                     \r\n--------------------------------------------------------------------\r\n\r\n                                 Parameter Estimates                                   \r\n--------------------------------------------------------------------------------------\r\n      model     Beta    Std. Error    Std. Beta      t        Sig      lower    upper \r\n--------------------------------------------------------------------------------------\r\n(Intercept)    0.191         0.643                  0.298    0.768    -1.125    1.508 \r\n        GDP    0.849         0.053        0.884    16.003    0.000     0.740    0.958 \r\n   Fuel_mix    0.557         0.124        0.247     4.479    0.000     0.302    0.811 \r\n--------------------------------------------------------------------------------------\r\n\r\n                          Elimination Summary                           \r\n-----------------------------------------------------------------------\r\n        Variable                  Adj.                                     \r\nStep    Removed     R-Square    R-Square     C(p)       AIC       RMSE     \r\n-----------------------------------------------------------------------\r\n   1    Final_EI      0.9172      0.9112    2.1930    41.6987    0.4384    \r\n-----------------------------------------------------------------------\r\n\r\n(v) Stepwise AIC Forward\r\nAlternatively, in a step-wise method, we can start with a single predictor and continue to add predictors based on AIC value until no variable is left.\r\n\r\n\r\nmodel <- lm(GHG_emissions ~ GDP + Final_EI + Fuel_mix, data = ghg_2018_ols)\r\n\r\n# Selection summary\r\nk <- ols_step_forward_aic(model)\r\nk\r\n\r\n\r\n\r\n                       Selection Summary                        \r\n---------------------------------------------------------------\r\nVariable      AIC      Sum Sq     RSS       R-Sq      Adj. R-Sq \r\n---------------------------------------------------------------\r\nGDP          78.139    81.167    17.196    0.82518      0.81954 \r\nFuel_mix     41.699    59.588     5.383    0.91715      0.91124 \r\n---------------------------------------------------------------\r\n\r\n# Plot\r\nplot(k)\r\n\r\n\r\n\r\n# obtain detailed output\r\nols_step_forward_aic(model, details = TRUE)\r\n\r\n\r\nForward Selection Method \r\n------------------------\r\n\r\nCandidate Terms: \r\n\r\n1 . GDP \r\n2 . Final_EI \r\n3 . Fuel_mix \r\n\r\n Step 0: AIC = 133.691 \r\n GHG_emissions ~ 1 \r\n\r\n--------------------------------------------------------------------\r\nVariable     DF      AIC      Sum Sq     RSS      R-Sq     Adj. R-Sq \r\n--------------------------------------------------------------------\r\nGDP           1     78.139    81.167    17.196    0.825        0.820 \r\nFuel_mix      1    111.529    10.359    54.612    0.159        0.130 \r\nFinal_EI      1    113.218     7.300    57.671    0.112        0.082 \r\n--------------------------------------------------------------------\r\n\r\n\r\n- GDP \r\n\r\n\r\n Step 1 : AIC = 78.13917 \r\n GHG_emissions ~ GDP \r\n\r\n-------------------------------------------------------------------\r\nVariable     DF     AIC      Sum Sq      RSS     R-Sq     Adj. R-Sq \r\n-------------------------------------------------------------------\r\nFuel_mix      1    41.699    -21.578    5.383    0.917        0.911 \r\nFinal_EI      1    58.441    -25.433    9.237    0.858        0.848 \r\n-------------------------------------------------------------------\r\n\r\n- Fuel_mix \r\n\r\n\r\n Step 2 : AIC = 41.69868 \r\n GHG_emissions ~ GDP + Fuel_mix \r\n\r\n------------------------------------------------------------------\r\nVariable     DF     AIC      Sum Sq     RSS     R-Sq     Adj. R-Sq \r\n------------------------------------------------------------------\r\nFinal_EI      1    43.478     0.038    5.344    0.918        0.909 \r\n------------------------------------------------------------------\r\n\r\n\r\nNo more variables to be added.\r\n\r\nVariables Entered: \r\n\r\n- GDP \r\n- Fuel_mix \r\n\r\n\r\nFinal Model Output \r\n------------------\r\n\r\n                        Model Summary                         \r\n-------------------------------------------------------------\r\nR                       0.958       RMSE               0.438 \r\nR-Squared               0.917       Coef. Var          3.959 \r\nAdj. R-Squared          0.911       MSE                0.192 \r\nPred R-Squared          0.903       MAE                0.330 \r\n-------------------------------------------------------------\r\n RMSE: Root Mean Square Error \r\n MSE: Mean Square Error \r\n MAE: Mean Absolute Error \r\n\r\n                               ANOVA                                 \r\n--------------------------------------------------------------------\r\n               Sum of                                               \r\n              Squares        DF    Mean Square       F         Sig. \r\n--------------------------------------------------------------------\r\nRegression     59.588         2         29.794    154.989    0.0000 \r\nResidual        5.383        28          0.192                      \r\nTotal          64.971        30                                     \r\n--------------------------------------------------------------------\r\n\r\n                                 Parameter Estimates                                   \r\n--------------------------------------------------------------------------------------\r\n      model     Beta    Std. Error    Std. Beta      t        Sig      lower    upper \r\n--------------------------------------------------------------------------------------\r\n(Intercept)    0.191         0.643                  0.298    0.768    -1.125    1.508 \r\n        GDP    0.849         0.053        0.884    16.003    0.000     0.740    0.958 \r\n   Fuel_mix    0.557         0.124        0.247     4.479    0.000     0.302    0.811 \r\n--------------------------------------------------------------------------------------\r\n\r\n                       Selection Summary                        \r\n---------------------------------------------------------------\r\nVariable      AIC      Sum Sq     RSS       R-Sq      Adj. R-Sq \r\n---------------------------------------------------------------\r\nGDP          78.139    81.167    17.196    0.82518      0.81954 \r\nFuel_mix     41.699    59.588     5.383    0.91715      0.91124 \r\n---------------------------------------------------------------\r\n\r\n(vi) Stepwise AIC Backward\r\nSimilarly, we can start with the full list of predictors and remove predictors based on AIC value until only one variable is left.\r\n\r\n\r\nmodel <- lm(GHG_emissions ~ GDP + Final_EI + Fuel_mix, data = ghg_2018_ols)\r\n\r\n# Selection summary\r\nk <- ols_step_backward_aic(model)\r\nk\r\n\r\n\r\n\r\n                  Backward Elimination Summary                   \r\n---------------------------------------------------------------\r\nVariable       AIC       RSS     Sum Sq     R-Sq      Adj. R-Sq \r\n---------------------------------------------------------------\r\nFull Model    43.478    5.344    59.627    0.91774      0.90860 \r\nFinal_EI      41.699    5.383    59.588    0.91715      0.91124 \r\n---------------------------------------------------------------\r\n\r\n# Plot\r\nplot(k)\r\n\r\n\r\n\r\n# obtain detailed output\r\nols_step_backward_aic(model, details = TRUE)\r\n\r\n\r\nBackward Elimination Method \r\n---------------------------\r\n\r\nCandidate Terms: \r\n\r\n1 . GDP \r\n2 . Final_EI \r\n3 . Fuel_mix \r\n\r\n Step 0: AIC = 43.47784 \r\n GHG_emissions ~ GDP + Final_EI + Fuel_mix \r\n\r\n--------------------------------------------------------------------\r\nVariable     DF      AIC      Sum Sq     RSS      R-Sq     Adj. R-Sq \r\n--------------------------------------------------------------------\r\nFinal_EI     1      41.699     0.038     5.383    0.917        0.911 \r\nFuel_mix     1      58.441     3.893     9.237    0.858        0.848 \r\nGDP          1     110.411    44.042    49.387    0.240        0.186 \r\n--------------------------------------------------------------------\r\n\r\n\r\nVariables Removed: \r\n\r\n- Final_EI \r\n\r\n\r\n  Step 1 : AIC = 41.69868 \r\n GHG_emissions ~ GDP + Fuel_mix \r\n\r\n---------------------------------------------------------------------\r\nVariable     DF      AIC      Sum Sq      RSS      R-Sq     Adj. R-Sq \r\n---------------------------------------------------------------------\r\nFuel_mix     1      78.139    -21.578    17.196    0.825        0.820 \r\nGDP          1     111.529     49.230    54.612    0.159        0.130 \r\n---------------------------------------------------------------------\r\n\r\n\r\nNo more variables to be removed.\r\n\r\nVariables Removed: \r\n\r\n- Final_EI \r\n\r\n\r\nFinal Model Output \r\n------------------\r\n\r\n                        Model Summary                         \r\n-------------------------------------------------------------\r\nR                       0.958       RMSE               0.438 \r\nR-Squared               0.917       Coef. Var          3.959 \r\nAdj. R-Squared          0.911       MSE                0.192 \r\nPred R-Squared          0.903       MAE                0.330 \r\n-------------------------------------------------------------\r\n RMSE: Root Mean Square Error \r\n MSE: Mean Square Error \r\n MAE: Mean Absolute Error \r\n\r\n                               ANOVA                                 \r\n--------------------------------------------------------------------\r\n               Sum of                                               \r\n              Squares        DF    Mean Square       F         Sig. \r\n--------------------------------------------------------------------\r\nRegression     59.588         2         29.794    154.989    0.0000 \r\nResidual        5.383        28          0.192                      \r\nTotal          64.971        30                                     \r\n--------------------------------------------------------------------\r\n\r\n                                 Parameter Estimates                                   \r\n--------------------------------------------------------------------------------------\r\n      model     Beta    Std. Error    Std. Beta      t        Sig      lower    upper \r\n--------------------------------------------------------------------------------------\r\n(Intercept)    0.191         0.643                  0.298    0.768    -1.125    1.508 \r\n        GDP    0.849         0.053        0.884    16.003    0.000     0.740    0.958 \r\n   Fuel_mix    0.557         0.124        0.247     4.479    0.000     0.302    0.811 \r\n--------------------------------------------------------------------------------------\r\n\r\n                  Backward Elimination Summary                   \r\n---------------------------------------------------------------\r\nVariable       AIC       RSS     Sum Sq     R-Sq      Adj. R-Sq \r\n---------------------------------------------------------------\r\nFull Model    43.478    5.344    59.627    0.91774      0.90860 \r\nFinal_EI      41.699    5.383    59.588    0.91715      0.91124 \r\n---------------------------------------------------------------\r\n\r\n3.2 Selected Models\r\nAssume that from the earlier variable selection module (Section 3.1), the chosen model is “GHG_emissions = GDP + Final_EI + Fuel_mix”.\r\n\r\n\r\nmodel <- lm(GHG_emissions ~ GDP + Final_EI + Fuel_mix, data = ghg_2018_ols)\r\n\r\n\r\n\r\n3.2.1 Regression Summary\r\nRun the following code chunk to output the regression summary (coefficient, standard errors etc.).\r\nCompared to jtools() package which only plots the coefficient value and confidence interval, the ggcoefstats() package provides a more comprehensive visualization of the coefficient values along with the t-statistics and p-value for each predictors. In addition, the latter also included the AIC and BIC value of the model and hence more is a more preferred visualization.\r\n\r\n\r\n# Tabular output\r\nols_regress(GHG_emissions ~ GDP + Final_EI + Fuel_mix, data = ghg_2018_ols)\r\n\r\n\r\n                        Model Summary                         \r\n-------------------------------------------------------------\r\nR                       0.958       RMSE               0.445 \r\nR-Squared               0.918       Coef. Var          4.018 \r\nAdj. R-Squared          0.909       MSE                0.198 \r\nPred R-Squared          0.892       MAE                0.331 \r\n-------------------------------------------------------------\r\n RMSE: Root Mean Square Error \r\n MSE: Mean Square Error \r\n MAE: Mean Absolute Error \r\n\r\n                               ANOVA                                 \r\n--------------------------------------------------------------------\r\n               Sum of                                               \r\n              Squares        DF    Mean Square       F         Sig. \r\n--------------------------------------------------------------------\r\nRegression     59.627         3         19.876    100.412    0.0000 \r\nResidual        5.344        27          0.198                      \r\nTotal          64.971        30                                     \r\n--------------------------------------------------------------------\r\n\r\n                                  Parameter Estimates                                   \r\n---------------------------------------------------------------------------------------\r\n      model      Beta    Std. Error    Std. Beta      t        Sig      lower    upper \r\n---------------------------------------------------------------------------------------\r\n(Intercept)    -0.481         1.664                 -0.289    0.775    -3.895    2.933 \r\n        GDP     0.858         0.058        0.893    14.917    0.000     0.740    0.976 \r\n   Final_EI     0.128         0.291        0.026     0.439    0.664    -0.469    0.724 \r\n   Fuel_mix     0.561         0.127        0.249     4.435    0.000     0.301    0.821 \r\n---------------------------------------------------------------------------------------\r\n\r\n# Plot coefficients using jtools package\r\nplot_summs(model, scale = TRUE)\r\n\r\n\r\n\r\n# Plot coefficients using ggcoefstats package\r\nggcoefstats(model)\r\n\r\n\r\n\r\n\r\n3.2.2 Testing for Heteroskedasticity\r\nOLS regression assumes that all residuals are drawn from a population that has a constant variance i.e. homoskedasticity. If the assumption is violated, there is heteroskedasticity problem and the estimators will be inefficient and hypothesis tests will be invalid.\r\nBelow presents 3 methods to determine if there is heteroskedasticity problem.\r\n(i) Bvensch Pagan Test\r\nUsing the lmtest() package, it will output the Chi2 or p-value. For the example below, since p-value is >0.05, the variance is constant.\r\n\r\n\r\n# Using lmtest package\r\nbptest(model, studentize = FALSE)\r\n\r\n\r\n\r\n    Breusch-Pagan test\r\n\r\ndata:  model\r\nBP = 0.91198, df = 3, p-value = 0.8225\r\n\r\nHowever, compared to lmtest() package, the function in olsrr() package is able to clearly indicate the null and alternative hypothesis, and the model tested on (shown below). This is more user friendly as users can easily identify the testing hypothesis, hence more preferred.\r\n\r\n\r\n# Using olsrr package\r\n# Using fitted values of the model\r\nols_test_breusch_pagan(model)\r\n\r\n\r\n\r\n Breusch Pagan Test for Heteroskedasticity\r\n -----------------------------------------\r\n Ho: the variance is constant            \r\n Ha: the variance is not constant        \r\n\r\n                  Data                    \r\n -----------------------------------------\r\n Response : GHG_emissions \r\n Variables: fitted values of GHG_emissions \r\n\r\n        Test Summary         \r\n ----------------------------\r\n DF            =    1 \r\n Chi2          =    0.235397 \r\n Prob > Chi2   =    0.6275506 \r\n\r\nIn addition, one can modify the code chunk to make adjustment to the parameters as shown below.\r\n\r\n\r\n# Using independent variables of the model\r\nols_test_breusch_pagan(model, rhs = TRUE)\r\n\r\n# Using independent variables of the model and perform multiple tests\r\nols_test_breusch_pagan(model, rhs = TRUE, multiple = TRUE)\r\n\r\n# Using Bonferroni p-value adjustment\r\nols_test_breusch_pagan(model, rhs = TRUE, multiple = TRUE, p.adj = 'bonferroni')\r\n\r\n# Using Sidak p-value adjustment\r\nols_test_breusch_pagan(model, rhs = TRUE, multiple = TRUE, p.adj = 'sidak')\r\n\r\n# Using Holm’s p-value adjustment\r\nols_test_breusch_pagan(model, rhs = TRUE, multiple = TRUE, p.adj = 'holm')\r\n\r\n\r\n\r\n(ii) Score Test\r\nAlternatively, we can also test for heteroskedasticity under the assumption that the errors are independent and identically distributed (i.i.d.).\r\nFrom either the Chi2 or p-value, users can determine if the null hypothesis is being rejected and hence if variance is homogenous. For the example below, since p-value is >0.05, we cannot reject the null hypothesis and hence conclude that the variance is homogenous.\r\n\r\n\r\n# Using olsrr package\r\n# Using fitted values of the model\r\nols_test_score(model)\r\n\r\n\r\n\r\n Score Test for Heteroskedasticity\r\n ---------------------------------\r\n Ho: Variance is homogenous\r\n Ha: Variance is not homogenous\r\n\r\n Variables: fitted values of GHG_emissions \r\n\r\n        Test Summary         \r\n ----------------------------\r\n DF            =    1 \r\n Chi2          =    0.2979123 \r\n Prob > Chi2   =    0.5851942 \r\n\r\nIn addition, one can modify the code chunk to make adjustment to the parameters as shown below.\r\n\r\n\r\n# Using independent variables of the model\r\nols_test_score(model, rhs = TRUE)\r\n\r\n\r\n\r\n(iii) F-test\r\nInstead of using Score test, F-test can also test the assumption of iid.\r\n\r\n\r\n# Using olsrr package\r\n# Using fitted values of the model\r\nols_test_f(model)\r\n\r\n\r\n\r\n F Test for Heteroskedasticity\r\n -----------------------------\r\n Ho: Variance is homogenous\r\n Ha: Variance is not homogenous\r\n\r\n Variables: fitted values of GHG_emissions \r\n\r\n      Test Summary        \r\n -------------------------\r\n Num DF     =    1 \r\n Den DF     =    29 \r\n F          =    0.2813963 \r\n Prob > F   =    0.5998264 \r\n\r\nSimilarly, one can modify the code chunk to make adjustment to the parameters as shown below.\r\n\r\n\r\n# Using independent variables of the model\r\nols_test_f(model, rhs = TRUE)\r\n\r\n\r\n\r\n3.2.3 Residual Diagnostics\r\nOLS regression assumes that the error has a normal distribution. Below presents 4 methods to detect the violation of normality assumption.\r\n(i) QQ-plot\r\nFrom the QQ-plot, if the data points do not fall near the diagonal line, it can be said that the normality assumption has been violated.\r\nUsing the EnvStats() package, we can obtain the Q-Q plot for the residuals.\r\n\r\n\r\n# Using EnvStats package\r\nres <- residuals(model)\r\nqqnorm(res, col = \"blue\")\r\nqqline(res, col = \"red\")\r\n\r\n\r\n\r\n\r\nHowever, there’s a function in olsrr() package which can also output the QQ residual plot. This is more efficient as more customization needs to be done if we were to use EnvStats() package (shown above).\r\n\r\n\r\n# Using olsrr package\r\nols_plot_resid_qq(model)\r\n\r\n\r\n\r\n\r\n(ii) Normality test\r\nAlternatively, the normality assumption can also be tested using the code chunk below.\r\n\r\n\r\n# Using olsrr package\r\nols_test_normality(model)\r\n\r\n\r\n-----------------------------------------------\r\n       Test             Statistic       pvalue  \r\n-----------------------------------------------\r\nShapiro-Wilk              0.9636         0.3625 \r\nKolmogorov-Smirnov        0.0996         0.8883 \r\nCramer-von Mises          4.0754         0.0000 \r\nAnderson-Darling          0.3697         0.4046 \r\n-----------------------------------------------\r\n\r\n# Correlation between observed residuals and expected residuals under normality.\r\nols_test_correlation(model)\r\n\r\n\r\n[1] 0.9847335\r\n\r\n(iii) Residual vs Fitted value\r\nTo detect non-linearity, unequal error variances, and outliers, plot a scatter plot with residual on the y-axis and fitted values on the x-axis.\r\n\r\n\r\n#Using graphics package\r\nres <- residuals(model)\r\nfitted <- fitted(model)\r\nplot(x=unlist(fitted), y=unlist(res), xlab=\"Fitted Value\", ylab=\"Residual\", col=\"blue\")\r\nabline(h=0, col=\"red\")\r\n\r\n\r\n\r\n\r\nHowever, there’s a function in olsrr() package which can easy output the residual vs fitted value with a single line of code, which is more efficient. More customization needs to be done if we were to use graphics() package (shown above).\r\n\r\n\r\n# Using olsrr package\r\nols_plot_resid_fit(model)\r\n\r\n\r\n\r\n\r\n(iv) Residual Histogram\r\nA histogram can also be plotted with a single line of code using olsrr() package to detect if normality assumption has been violated.\r\n\r\n\r\n# Using olsrr package\r\nols_plot_resid_hist(model)\r\n\r\n\r\n\r\n\r\n3.2.4 Collinear Diagnostics\r\nIn this module, the following code chunk was explored to detect collinearity between variables. In the presence of multicollinearity, regression estimates are unstable and have high standard errors.\r\nThe following chunk of code was ran using olsrr() package and showed that the VIFs are less than 4 and hence there is little sign of multicollinearity that requires correction.\r\n\r\n\r\n# Using olsrr package\r\nols_coll_diag(model) #output VIF values and conditional index\r\n\r\n\r\nTolerance and Variance Inflation Factor\r\n---------------------------------------\r\n  Variables Tolerance      VIF\r\n1       GDP 0.8502620 1.176108\r\n2  Final_EI 0.8600236 1.162759\r\n3  Fuel_mix 0.9643066 1.037015\r\n\r\n\r\nEigenvalue and Condition Index\r\n------------------------------\r\n   Eigenvalue Condition Index    intercept          GDP     Final_EI\r\n1 3.728424273        1.000000 0.0001625225 0.0008966271 0.0002740949\r\n2 0.256834939        3.810093 0.0006613313 0.0028267622 0.0012910893\r\n3 0.013294254       16.746756 0.0071802453 0.6118807156 0.0942064483\r\n4 0.001446534       50.768964 0.9919959010 0.3843958951 0.9042283675\r\n     Fuel_mix\r\n1 0.017894663\r\n2 0.951913455\r\n3 0.025820588\r\n4 0.004371294\r\n\r\n# ols_vif_tol(model) to output only the VIF values\r\n# ols_eigen_cindex(model) to output only the conditional index\r\n\r\n\r\n\r\nAlternatively, we could test multi-collinearity using the vif function in caret() package as shown below. Nonetheless, the ols_coll_diag function in olsrr() package is still preferred as it provides more information e.g. tolerence and conditional index. This gives user wider option to decide which criterion they would like to use for their evaluation.\r\n\r\n\r\n# Using caret package\r\ncar::vif(model)\r\n\r\n\r\n     GDP Final_EI Fuel_mix \r\n1.176108 1.162759 1.037015 \r\n\r\n3.2.5 Model Fit Assessment\r\nIn this module, 3 sub-modules will be explored to determine the fit of the chosen model.\r\n(i) Residual Fit Spread plot\r\nUsing the olsrr() package, we can easily See how much variation in the data is explained by the fit and how much remains in the residuals with just one line of code. If the spread of the residuals is greater than the spread of the centered fit, the model is deemed as inappropriate and users should consider choosing other models (repeat the variable selection module).\r\n\r\n\r\n# Using olsrr package\r\nols_plot_resid_fit_spread(model)\r\n\r\n\r\n\r\n\r\n(ii) Part & Partial Correlations\r\nThe pcor function in the ppcor() package can calculate the pairwise partial correlations for each pair of variables given others. In addition, it gives us the p value as well as statistic for each pair of variables.\r\nHowever, the output shows that there’s an error as the pcor function does not allow missing values.\r\n\r\n\r\n# Using ppcor package\r\npcor(ghg_2018_ols)\r\n\r\n\r\nError in if (det(cvx) < .Machine$double.eps) {: missing value where TRUE/FALSE needed\r\n\r\nOn the contrary, the ols_correlations function in olsrr() package is able to handle missing values and computes the relative importance of the independent variables in determining the dependent variable i.e. Greenhouse gas emissions level.\r\n“Zero Order” shows the Pearson correlation coefficient between the dependent variable and the independent variable i.e. the higher the absolute value, the more correlated the dependent and independent variable are. “Partial” shows how much the estimated independent variable contributes to the variance in Y. While, “Part” shows the unique contribution of independent variables i.e. higher value indicates higher contribution (R-square) in explaining the model.\r\n\r\n\r\n# Using olsrr package\r\nols_correlations(model)\r\n\r\n\r\n               Correlations                \r\n------------------------------------------\r\nVariable    Zero Order    Partial    Part  \r\n------------------------------------------\r\nGDP              0.926      0.944    0.823 \r\nFinal_EI        -0.335      0.084    0.024 \r\nFuel_mix         0.399      0.649    0.245 \r\n------------------------------------------\r\n\r\n(iii) Observed vs Predicted plot\r\nTo access the fit of the model, we can plot the observed on the x-axis and fitted values on the y-axis using the plot function in graphics() package. A model is deemed as a good fit if the points are close to the diagonal line i.e. R-square will be higher.\r\n\r\n\r\nfitted <- fitted(model)\r\n\r\n# Exclude Liechtenstein and Switzerland as these two countries were dropped in the \r\n# ols regression model step due to missing values in the predictors Final_EI and Fuel_mix.\r\nghg_2018_ols_v2 <- ghg_2018_ols[-c(29, 31),]\r\n\r\n# Using graphics package\r\nplot(x=ghg_2018_ols_v2$GHG_emissions, y=fitted, ylab=\"Fitted Value\", xlab=\"GHG_emissions\", col=\"blue\")\r\nabline(a=0, b=1, col=\"blue\") #Add diagonal line\r\n\r\n\r\n\r\n\r\nExploring the olsrr() package, there is a function called ols_plot_obs_fit which plots the same graph as above, and includes the regression line (red). This function is preferred compared to plot function shown above as it is a single line code. In addition, the ols_plot_obs_fit function is able to exclude records which were dropped from the OLS model. This is unlike using plot function where additional code is needed to exclude records with missing values in the predictors.\r\n\r\n\r\n# Using olsrr package\r\nols_plot_obs_fit(model)\r\n\r\n\r\n\r\n\r\n4.0 Proposed Visualization\r\nBased on the exploration of different packages shown in Section 3, the proposed visualization for the OLS regression module, the types of data visualizations used, and corresponding rationales are illustrated below:\r\n\r\n\r\n\r\nInteractivity\r\nThe following interactive features (left panel shown above) are proposed to be incorporated in the shiny app to enhance usability and hence user experience:\r\nUsers can select the dependent and independent variables to be included in the model, and the year of analysis.\r\nUsers have the option to choose the different types of OLS methods to run to select the suitable list of predictors. List of methods are (i) All possibilities, (ii) Best subset, (iii) Stepwise forward/backward and (iv) Stepwise AIC forward/backward.\r\nBased on the list of predictors, users can also choose their preferred choice of test to run to check for any violation of OLS assumptions and check for model fit. List of tests are (i) Heteroskedasticity test (Bvensch Pagan Test; Score test; F-test), (ii) Residual diagnostics (QQ-plot; Normality test; Residual Histogram; Residual vs Fitted value), (iii) Collinear diagnostics and (iv) Model fit assessment (Residual Fit Spreadplot; Part & Partial Correlations; Observed vs Predicted plot).\r\nThe application eliminates the need for users to write any code chunks to run different permutations of OLS regression models and/or assumptions test.\r\nMajor Advantages of Incorporating Interactivity\r\nFlexible OLS regression analysis: To enable users to explore the different type of OLS regression methods available (e.g. stepwise forward/backward, best subset etc.) without the need to code. In addition, users have the choice of deciding which dependent and independent variables to include for their exploration.\r\nAssumption test modules: To enable users to determine if their chosen model violates the OLS assumptions without having the need to code. In addition, the different sub-modules ensures that all the necessary assumptions are checked. Various tests for each OLS assumption are also presented to give users the option to choose their preferred test. For instance, users can choose between QQ-plot, normality test or residual histogram to determine if there was violation in the normality assumption.\r\nThank you for reading :)\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-03-19-ordinary-least-square-model/ordinary-least-square-model_files/figure-html5/unnamed-chunk-4-1.png",
    "last_modified": "2021-04-11T00:18:17+08:00",
    "input_file": "ordinary-least-square-model.utf8.md"
  },
  {
    "path": "posts/2021-03-19-exploration-data-analysis/",
    "title": "Exploration Data Analysis of factors affecting Greenhouse Gas Emission levels",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Wong Wei Sheng Dylan",
        "url": {}
      }
    ],
    "date": "2021-03-17",
    "categories": [],
    "contents": "\r\nDistill is a publication format for scientific and technical writing, native to the web.\r\nLearn more about using Distill at https://rstudio.github.io/distill.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-03-19T23:25:26+08:00",
    "input_file": "exploration-data-analysis.utf8.md"
  },
  {
    "path": "posts/2021-03-28-data-preparation/",
    "title": "Data Preparation",
    "description": "Details on the data source and the step-by-step guide for data manipulation to merge all datasets into 1 consolidated data for subsquent analyses",
    "author": [
      {
        "name": "Group 2 (Angeline Jiang, Dylan Wong, Selene Choong)",
        "url": {}
      }
    ],
    "date": "2021-03-16",
    "categories": [],
    "contents": "\r\n\r\nContents\r\nRelevant Literature Reviews\r\nData Source\r\nDatasets Used\r\nStep-by-Step Data Preparation\r\n(1) Installing and launching required R packages\r\n(2) Data wrangling\r\n(3) Data merging\r\n\r\nRelevant Literature Reviews\r\nA study conducted by González-Sánchez, M., & Martín-Ortega, J. (2020) on the determinants of greenhouse gas emissions growth in Europe considered majority of the driver factors available on Eurostat database and found that GDP and final energy intensity are the main drivers for the reduction of greenhouse gas emissions in Europe. Furthermore, energy prices are not significant and heterogeneous results are found for the renewable energy, fuel mix and carbon intensity determinants, pointing to a different behavior at the country level.\r\nOur research value-adds the above paper as we aim to identify an extended list of mitigation factors which could potentially play an important role in the reduction of greenhouse gas emissions in Europe.\r\nExtended list of mitigation\r\nVariable\r\nLit Reviews\r\nEnvironmental taxes\r\nMiller, S., & Vela, M. (2013) and European Environment Agency (1996) found that environmental taxes are effective in reducing greenhouse gas emissions.\r\nLiquid biofuels production capacities\r\nMixed reviews over influence of biofuels in reducing greenhouse gas emissions – dependent on geographical locations and the types of biofuels though most studies such as Menichetti, E., & Otto, M. (2009), Allaire, M., & Brown, S. P. (2015) and Hanaki, K., & Portugal-Pereira, J. (2018) found that biofuel contribute to a reduction in greenhouse gas emissions.\r\nSolar thermal collectors’ surface\r\nSolar PV power generation is one of the pillars of the plans to decarbonise the EU’s power supply and its role is highlighted in the European Commission 2018 Communication “A European long-term strategic vision for a prosperous, modern, competitive and climate neutral economy”. In addition, Vartiainen, E., Masson, G., Breyer, C., Moser, D., & Román Medina, E. (2020) found that recent technology progress positions PV among the most cost-effective electricity generation technologies.\r\nHeat pumps\r\nBayer, P., Saner, D., Bolay, S., Rybach, L., & Blum, P. (2012) found that heat pumps would contribute over 20% of the EU energy saving goal, 20% of the renewable energy input and 20% of the CO2 emission target.\r\nData Source\r\nAll the datasets used for this project is obtained from Eurostat (https://ec.europa.eu/eurostat), the database with European statistics maintained by the statistical office of the European Union. Our group will be focusing on the overall greenhouse gas emissions, excluding Land Use and Land Use Change and Forest (LULUCF) while also exploring into the common greenhouse gases (i.e. carbon dioxide, methane and nitrous oxide).\r\nThe list of driver and mitigation variables that would be covered in our project include:\r\nCategory\r\nVariables\r\nDrivers\r\n1. Gross Domestic Product (GDP)  2. Final energy intensity  3. Fuel mix  4. Carbon intensity\r\nMitigation\r\n5. Renewable energy  6. Environmental taxes by economic activity  7. Liquid biofuels production capacities  8. Solar thermal collectors’ surface  9. Heat pumps - technical characteristics by technologies\r\nDatasets Used\r\nDetails on the exact datasets used for each variable are listed in the table below:\r\nVariables\r\nDataset from EuroStat\r\nGreenhouse gas emissions\r\nenv_air_gge\r\nGross Domestic Product (GDP)\r\nnama_10_gdp\r\nFinal energy intensity\r\nComputed using sdg_07_11 and nama_10_gdp\r\nFuel mix\r\nnrg_ind_fecf\r\nCarbon intensity\r\nsdg_13_20\r\nShare of energy from renewable sources\r\nnrg_ind_ren\r\nEnvironmental taxes by economic activity\r\nenv_ac_taxind2\r\nLiquid biofuels production capacities\r\nnrg_inf_lbpc\r\nSolar thermal collectors’ surface\r\nnrg_inf_stcs\r\nHeat pumps - technical characteristics by technologies\r\nnrg_inf_hptc\r\nStep-by-Step Data Preparation\r\n(1) Installing and launching required R packages\r\nA list of packages are required for the data manipulation exercise. This code chunk installs the required packages and loads them into the RStudio environment.\r\n\r\n\r\npackages <- c(\"tidyverse\", \"readxl\")\r\nfor (p in packages){\r\n  if(!require(p, character.only = T)){\r\n    install.packages(p)\r\n  }\r\n  library(p, character.only = T)\r\n}\r\n\r\n\r\n\r\n(2) Data wrangling\r\nData was imported using the read_excel() function since the downloaded datasets were in .xlsx format. As the downloaded datasets had irrelevant rows and columns, select() and drop_na() were used to clean up the data. To facilitate the selection of the relevant columns, a list reqColumns containing the column names to keep was created.\r\n\r\n\r\nreqColumns <- c(\"TIME\", \"2010\", \"2011\", \"2012\", \"2013\", \"2014\", \"2015\", \"2016\", \"2017\", \"2018\")\r\n\r\n\r\n\r\nGreenhouse gas emissions\r\n\r\n\r\n# Overall greenhouse gases\r\ndep_GHG <- read_excel(\"data/DEP (GHG) ENV_AIR_GGE.xlsx\", sheet = \"Sheet 2\", skip = 9) %>% \r\n  select(reqColumns) %>% \r\n  drop_na(all_of(reqColumns[-1]))\r\n\r\n# Carbon dioxide\r\ndep_CO2 <- read_excel(\"data/DEP (GHG) ENV_AIR_GGE.xlsx\", sheet = \"Sheet 11\", skip = 9) %>% \r\n  select(reqColumns) %>% \r\n  drop_na(all_of(reqColumns[-1]))\r\n\r\n# Methane (CO2 equivalent)\r\ndep_CH4 <- read_excel(\"data/DEP (GHG) ENV_AIR_GGE.xlsx\", sheet = \"Sheet 29\", skip = 9) %>% \r\n  select(reqColumns) %>% \r\n  drop_na(all_of(reqColumns[-1]))\r\n\r\n# Nitrous oxide (CO2 equivalent)\r\ndep_NO2 <- read_excel(\"data/DEP (GHG) ENV_AIR_GGE.xlsx\", sheet = \"Sheet 47\", skip = 9) %>% \r\n  select(reqColumns) %>% \r\n  drop_na(all_of(reqColumns[-1]))\r\n\r\n\r\n\r\nGross Domestic Product (GDP)\r\n\r\n\r\ndriver_GDP <- read_excel(\"data/DRIV (GDP) NAMA_10_GDP.xlsx\", sheet = \"Sheet 2\", skip = 8) %>% \r\n  select(reqColumns)\r\n\r\n# Subset to drop irrelevant rows\r\ndriver_GDP <- driver_GDP[2:46, ]\r\n\r\n\r\n\r\nFinal energy intensity\r\nAs the dataset for final energy intensity is not readily available on Eurostat, computations will be required. Variable will be computed using two separate datasets - final energy consumption and GDP, million purchasing power standards - and the energy intensity computation available on Eurostat.\r\n\r\n\r\n# Final energy consumption\r\ndriver_FEI_FEC <- read_excel(\"data/DRIV (EI - FEC) SDG_07_11.xlsx\", sheet = \"Sheet 1\", skip = 7) %>% \r\n  select(reqColumns)\r\ndriver_FEI_FEC <- driver_FEI_FEC[2:42, ]\r\n\r\n# GDP (in million purchasing power standards)\r\ndriver_FEI_GDP <- read_excel(\"data/DRIV (GDP) NAMA_10_GDP.xlsx\", sheet = \"Sheet 3\", skip = 8) %>% \r\n  select(reqColumns)\r\ndriver_FEI_GDP <- driver_FEI_GDP[2:46, ]\r\n\r\n\r\n\r\nFinal energy intensity is computed using the following formula: 1000000*driver_FEI_FEC/driver_FEI_GDP and results rounded to 2 decimal places. As there are more countries in the GDP dataset, rows with countries not in the final energy consumption dataset were dropped.\r\n\r\n\r\n# Keeping only relevant countries from GDP and reorder as per FEC dataset\r\ndriver_FEI_GDP_cleaned <- driver_FEI_GDP %>% \r\n  filter(TIME %in% driver_FEI_FEC$TIME) %>%\r\n  slice(match(driver_FEI_FEC$TIME, TIME))\r\n\r\n# Computing the final energy intensity\r\ndriver_FEI <- cbind(driver_FEI_FEC$TIME, round(1000000 * (driver_FEI_FEC[-1]/driver_FEI_GDP_cleaned[-1]), 2))\r\n\r\n\r\n\r\nFuel mix\r\n\r\n\r\ndriver_FM <- read_excel(\"data/DRIV (FM) NRG_IND_FECF.xlsx\", sheet = \"Sheet 1\", skip = 9) %>% \r\n  select(reqColumns)\r\ndriver_FM <- driver_FM[2:44, ]\r\n\r\n\r\n\r\nCarbon intensity\r\n\r\n\r\ndriver_CI <- read_excel(\"data/DRIV (CI) SDG_13_20.xlsx\", sheet = \"Sheet 1\", skip = 7) %>% \r\n  select(reqColumns)\r\ndriver_CI <- driver_CI[2:35, ]\r\n\r\n\r\n\r\nShare of energy from renewable sources\r\n\r\n\r\nmitig_RES <- read_excel(\"data/MITIG (RES) NRG_IND_REN.xlsx\", sheet = \"Sheet 1\", skip = 7) %>% \r\n  select(reqColumns)\r\nmitig_RES <- mitig_RES[2:41, ]\r\n\r\n\r\n\r\nEnvironmental taxes by economic activity\r\n\r\n\r\nmitig_ET <- read_excel(\"data/MITIG (ET) ENV_AC_TAXIND2.xlsx\", sheet = \"Sheet 65\", skip = 9) %>% \r\n  select(reqColumns)\r\nmitig_ET <- mitig_ET[2:38, ]\r\n\r\n\r\n\r\nLiquid biofuels production capacities\r\nWhile Eurostat has distinguished the production capacities by different liquid biofuel types, our group will be analysing this variable at the collective overall level.\r\n\r\n\r\n# Pure biogasline\r\nmitig_LBF_biogasline <- read_excel(\"data/MITIG (LBF) NRG_INF_LBPC.xlsx\", sheet = \"Sheet 1\", skip = 9) %>% \r\n  select(reqColumns)\r\nmitig_LBF_biogasline <- mitig_LBF_biogasline[2:44, ]\r\n\r\n# Pure biodiesels\r\nmitig_LBF_biodiesels <- read_excel(\"data/MITIG (LBF) NRG_INF_LBPC.xlsx\", sheet = \"Sheet 2\", skip = 9) %>% \r\n  select(reqColumns)\r\nmitig_LBF_biodiesels <- mitig_LBF_biodiesels[2:44, ]\r\n\r\n# Pure bio jet kerosene\r\nmitig_LBF_bjkerosene <- read_excel(\"data/MITIG (LBF) NRG_INF_LBPC.xlsx\", sheet = \"Sheet 3\", skip = 9) %>% \r\n  select(reqColumns)\r\nmitig_LBF_bjkerosene <- mitig_LBF_bjkerosene[2:44, ]\r\n\r\n# Other liquid biofuels\r\nmitig_LBF_others <- read_excel(\"data/MITIG (LBF) NRG_INF_LBPC.xlsx\", sheet = \"Sheet 4\", skip = 9) %>% \r\n  select(reqColumns)\r\nmitig_LBF_others <- mitig_LBF_others[2:44, ]\r\n\r\n\r\n\r\nSummation was performed to get the total value of liquid biofuels production capacities for each country at each year.\r\n\r\n\r\nmitig_LBF <- cbind(mitig_LBF_biogasline$TIME, \r\n                   (mitig_LBF_biogasline[-1] + mitig_LBF_biodiesels[-1] + mitig_LBF_bjkerosene[-1] + mitig_LBF_others[-1]))\r\n\r\n\r\n\r\nSolar thermal collectors’ surface\r\n\r\n\r\nmitig_ST <- read_excel(\"data/MITIG (ST) NRG_INF_STCS.xlsx\", sheet = \"Sheet 1\", skip = 8) %>% \r\n  select(reqColumns)\r\nmitig_ST <- mitig_ST[2:44, ]\r\n\r\n\r\n\r\nHeat pumps - technical characteristics by technologies\r\nWhile Eurostat has distinguished the installed thermal capacity by different heat pump technologies, our group will be analysing this variable at the collective overall level.\r\n\r\n\r\n# Aerothermal\r\nmitig_HP_aerothermal <- read_excel(\"data/MITIG (HP) NRG_INF_HPTC.xlsx\", sheet = \"Sheet 1\", skip = 9) %>% \r\n  select(reqColumns)\r\nmitig_HP_aerothermal <- mitig_HP_aerothermal[2:44, ]\r\n\r\n# Geothermal\r\nmitig_HP_geothermal <- read_excel(\"data/MITIG (HP) NRG_INF_HPTC.xlsx\", sheet = \"Sheet 2\", skip = 9) %>% \r\n  select(reqColumns) \r\nmitig_HP_geothermal <- mitig_HP_geothermal[2:44, ]\r\n\r\n# Hydrothermal\r\nmitig_HP_hydrothermal <- read_excel(\"data/MITIG (HP) NRG_INF_HPTC.xlsx\", sheet = \"Sheet 3\", skip = 9) %>% \r\n  select(reqColumns) \r\nmitig_HP_hydrothermal <- mitig_HP_hydrothermal[2:44, ]\r\n\r\n\r\n\r\nSummation was performed to get the total value of linstalled thermal capacity across all heat pump technologies for each country at each year.\r\n\r\n\r\nmitig_HP <- cbind(mitig_HP_aerothermal$TIME, \r\n                  (mitig_HP_aerothermal[-1] + mitig_HP_geothermal[-1] + mitig_HP_hydrothermal[-1]))\r\n\r\n\r\n\r\n(3) Data merging\r\nPrior to joining the datasets, transposing was first performed to convert each dataset into the format where each row represents the value for a country for a year.\r\n\r\n\r\ndep_GHG_transposed <- pivot_longer(dep_GHG, cols = starts_with(\"2\"), names_to = \"Year\", values_to = \"GHG_emissions\") %>% rename(Country = TIME)\r\ndep_CO2_transposed <- pivot_longer(dep_CO2, cols = starts_with(\"2\"), names_to = \"Year\", values_to = \"CO2_emissions\") %>% rename(Country = TIME)\r\ndep_CH4_transposed <- pivot_longer(dep_CH4, cols = starts_with(\"2\"), names_to = \"Year\", values_to = \"CH4_emissions\") %>% rename(Country = TIME)\r\ndep_NO2_transposed <- pivot_longer(dep_NO2, cols = starts_with(\"2\"), names_to = \"Year\", values_to = \"NO2_emissions\") %>% rename(Country = TIME)\r\n\r\ndriver_GDP_transposed <- pivot_longer(driver_GDP, cols = starts_with(\"2\"), names_to = \"Year\", values_to = \"GDP\") %>% rename(Country = TIME)\r\ndriver_FEI_transposed <- pivot_longer(driver_FEI, cols = starts_with(\"2\"), names_to = \"Year\", values_to = \"Final_EI\") %>% rename(Country = `driver_FEI_FEC$TIME`)\r\ndriver_FM_transposed <- pivot_longer(driver_FM, cols = starts_with(\"2\"), names_to = \"Year\", values_to = \"Fuel_mix\") %>% rename(Country = TIME)\r\ndriver_CI_transposed <- pivot_longer(driver_CI, cols = starts_with(\"2\"), names_to = \"Year\", values_to = \"Carbon_intensity\") %>% rename(Country = TIME)\r\n\r\nmitig_RES_transposed <- pivot_longer(mitig_RES, cols = starts_with(\"2\"), names_to = \"Year\", values_to = \"Renewables_share\") %>% rename(Country = TIME)\r\nmitig_ET_transposed <- pivot_longer(mitig_ET, cols = starts_with(\"2\"), names_to = \"Year\", values_to = \"Envt_taxes\") %>% rename(Country = TIME)\r\nmitig_LBF_transposed <- pivot_longer(mitig_LBF, cols = starts_with(\"2\"), names_to = \"Year\", values_to = \"Liquid_biofuels\") %>% rename(Country = `mitig_LBF_biogasline$TIME`)\r\nmitig_ST_transposed <- pivot_longer(mitig_ST, cols = starts_with(\"2\"), names_to = \"Year\", values_to = \"Solar_thermal\") %>% rename(Country = TIME)\r\nmitig_HP_transposed <- pivot_longer(mitig_HP, cols = starts_with(\"2\"), names_to = \"Year\", values_to = \"Heat_pumps\") %>% rename(Country = `mitig_HP_aerothermal$TIME`)\r\n\r\n\r\n\r\nAll transposed datasets were merged into 1 consolidated dataset using the function left_join() where the greenhouse gas emission dataset will be the primary x dataset for joining to ensure all countries included have the emission data available.\r\n\r\n\r\nGHGproj_data <- left_join(dep_GHG_transposed, dep_CO2_transposed, by = c(\"Year\", \"Country\")) %>% \r\n  left_join(., dep_CH4_transposed, by = c(\"Year\", \"Country\")) %>% \r\n  left_join(., dep_NO2_transposed, by = c(\"Year\", \"Country\")) %>% \r\n  left_join(., driver_GDP_transposed, by = c(\"Year\", \"Country\")) %>% \r\n  left_join(., driver_FEI_transposed, by = c(\"Year\", \"Country\")) %>% \r\n  left_join(., driver_FM_transposed, by = c(\"Year\", \"Country\")) %>% \r\n  left_join(., driver_CI_transposed, by = c(\"Year\", \"Country\")) %>% \r\n  left_join(., mitig_RES_transposed, by = c(\"Year\", \"Country\")) %>% \r\n  left_join(., mitig_ET_transposed, by = c(\"Year\", \"Country\")) %>% \r\n  left_join(., mitig_LBF_transposed, by = c(\"Year\", \"Country\")) %>% \r\n  left_join(., mitig_ST_transposed, by = c(\"Year\", \"Country\")) %>% \r\n  left_join(., mitig_HP_transposed, by = c(\"Year\", \"Country\"))\r\n\r\n\r\n\r\nConsolidated tibble dataframe is exported as a csv file for subsequent analyses.\r\n\r\n\r\nwrite_csv(GHGproj_data, file = \"data/GHGproj_data.csv\")\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-04-08T02:33:03+08:00",
    "input_file": "data-preparation.utf8.md"
  },
  {
    "path": "posts/2021-02-25-proposal/",
    "title": "Proposal",
    "description": "Exploratory analysis of greenhouse gas emissions and Panel data regression for investigating the determinants of greenhouse gas emissions for European Union countries",
    "author": [
      {
        "name": "Group 2 (Angeline Jiang, Dylan Wong, Selene Choong)",
        "url": {}
      }
    ],
    "date": "2021-02-25",
    "categories": [],
    "contents": "\r\n\r\nContents\r\nBackground\r\nMotivation\r\nProject Objectives\r\nBroad Data Description\r\nProposed Scope and Methodology\r\nStoryboard & Visualization Features\r\n(A) Exploratory Data Analysis (EDA) methods in R\r\n(B) Analysis of Ordinary Least Square regression in R\r\n(C) Analysis of Panel data regression in R\r\nProposed R Packages\r\nTeam Members\r\nReferences\r\n\r\n\r\nh1, h2, h3 {\r\ntext-align: left\r\n}\r\nbody {\r\ntext-align: justify}\r\nBackground\r\nGlobal warming is expected to result in a rise of the average global temperature between 1.1 to 6.4 degree celsius over the century, if there are no interventions taken to reduce emissions of greenhouse gases. Greenhouse gases are contributed by multiple drivers which include economic activities such as electricity production, transportation and waste generation. Carbon dioxide is the primary greenhouse gas emitted through human activities.\r\nIn December 2020, the European Union (EU) leaders committed to an ambitious goal of reducing greenhouse gases by 55% by 2030 to tackle climate change. The EU is currently the world’s third biggest emitter of greenhouse gases. Measures, such as emission taxes and use of renewable energy sources, were introduced to mitigate the greenhouse gas emissions, especially carbon dioxide emissions.\r\nMotivation\r\nA large amount of climate change related statistics are available on Eurostat, with data across multiple domains such as environmental, social and economic statistics. Monitoring of the reduction of greenhouse gas emissions can be performed and is essential for tracking EU’s progress towards achieving its 2030 goal. Analysis of the impacts of the drivers and mitigation using the available statistics also allowed for insights on the determinants of the greenhouse gas emissions for the EU countries.\r\nProject Objectives\r\nThe project aims to deliver an R-Shiny app that provides interactive user interface design to:\r\nUnderstand the correlation of factors affecting greenhouse gas emissions\r\nFurther analyse the difference in greenhouse gas emissions by country and time period\r\nIdentify important factors which contributes to greenhouse gas emissions from cross-sectional view using Ordinary Least Square regression and from panel data view using Panel data regression\r\nBroad Data Description\r\nStatistics from Eurostat covering a wide range of domains are used in this R Shiny Application. For our project, we will focus on datasets under greenhouse gas emissions, drivers and mitigation for all EU countries.\r\nProposed Scope and Methodology\r\nAnalysis of Eurostat greenhouse emission dataset with background research\r\nExploratory Data Analysis (EDA) methods in R\r\nAnalysis of Ordinary Least Square regression in R\r\nAnalysis of Panel data regression in R\r\nDevelopment of validating checks and model selection in R for both Ordinary Least Square and Panel regression\r\nR-Shiny app development for user interactivity\r\nA generalized development timeframe for this project is shown below:\r\n\r\n\r\n\r\nStoryboard & Visualization Features\r\n(A) Exploratory Data Analysis (EDA) methods in R\r\nThe proposed layout of the R Shiny app consists of 3 main tabs in the tab panel\r\n\r\nUnder the EDA tab, there will be another tab panel comprising of 4 tabs shown below:\r\nData\r\nProposed Visualisation\r\nGreenhouse Gases Emission\r\n\r\nGreen Energy Production\r\n\r\nCorrelation Plot of Drivers and Mitigation\r\n\r\nScatter Plot for Drivers and Mitigation\r\n\r\n(B) Analysis of Ordinary Least Square regression in R\r\nThe following shows the first module under OLS regression where users can explore different methods to determine the set of predictors for their model.\r\n\r\n\r\n\r\nThereafter, users will input their preferred dependent and independent variables to generate the regression estimations. At the same time, a series of validation/assumption checks will be in place for the users to determine if the chosen model is appropriate.\r\n\r\n\r\n\r\n(C) Analysis of Panel data regression in R\r\n\r\n\r\n\r\nIf user(s) prefers to see in terms of bar chart i.e. “Bar” is selected under the View option.\r\n\r\n\r\n\r\nDevelopment of validating checks and model selection in R\r\nTo cater to varying statistical knowledge of users, there will be two types of outputs shown - (1) simplified overview of whether the assumptions for the calibrated model is met and (2) detailed outputs from each validation tests.\r\n\r\n\r\n\r\nThe list of validation tests for the panel models include:\r\nTest of poolability using Chow test\r\nTests for individual and time effects using Lagrange multiplier test\r\nTest for correlation between unobserved effects and the regressors using Hausman-type test\r\nTest for stationarity of the series using Augmented Dickey-Fuller (ADF)\r\nTest for cross-sectional dependence using the Pesaran CD test of independence\r\nProposed R Packages\r\nData Preparation\r\ntidyverse: https://www.tidyverse.org\r\nOrdinary Least Square regression\r\nolsrr: https://cran.r-project.org/web/packages/olsrr/index.html\r\njtools: https://cran.r-project.org/web/packages/jtools/index.html\r\nggstatsplot: https://cran.r-project.org/web/packages/ggstatsplot/index.html\r\nggstance: https://cran.r-project.org/web/packages/ggstance/index.html\r\nPanel data regression\r\nExPanDaR: https://cran.r-project.org/web/packages/ExPanDaR\r\nplm: https://cran.r-project.org/web/packages/plm\r\nstargazer: https://cran.r-project.org/web/packages/stargazer\r\ntseries: https://cran.r-project.org/web/packages/tseries\r\nBuilding Shiny App\r\nshiny: https://shiny.rstudio.com\r\nshinythemes: https://cran.r-project.org/web/packages/shinythemes\r\nshinyWidgets: https://cran.r-project.org/web/packages/shinyWidgets\r\nRColorBrewer: https://cran.r-project.org/web/packages/RColorBrewer\r\nTeam Members\r\nChoong Shi Lian Selene\r\nJiang Weiling Angeline\r\nWong Wei Sheng Dylan\r\nReferences\r\nClimate change: EU leaders set 55% target for CO2 emissions cut\r\nCombating climate change: Fact sheet\r\nOverview of Greenhouse Cases: Carbon Dioxide\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-02-25-proposal/./image/timeline.png",
    "last_modified": "2021-04-04T23:42:02+08:00",
    "input_file": "proposal.utf8.md"
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome to Visual Analytics Project",
    "description": "Welcome to our new blog, Visual Analytics Project. We hope you enjoy \nreading what we have to say!",
    "author": [
      {
        "name": "Choong Shi Lian Selene,Jiang Weiling Angeline, Wong Wei Sheng Dylan",
        "url": {}
      }
    ],
    "date": "2021-02-24",
    "categories": [],
    "contents": "\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-03-19T23:28:08+08:00",
    "input_file": "welcome.utf8.md"
  }
]
